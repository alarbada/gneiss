Declarar componente
<x-component name="test">
    <x-prop name="p1" optional />
    <x-prop name="p2" />
    <x-prop name="p3" />

    <h1>what</h1>
    <div>this is something</div>
</x-component>

<x-test p2="what" p3="{{ .P3 }}" />

<x-component name="test2">
    <div class="paper">
        <h1>
            <x-slot name="title" />
        </h1>
        <div>
            <x-slot name="contents" />
        </div>
    </div>
</x-component>

<x-test2>
    <x-title-slot> this is the title </x-title-slot>
    <x-contents-slot> this are the contents </x-contents-slot>
</x-test2>

<x-component name="test3">
    <x-prop name="p1"></x-prop>

    <div x-if="{{ props.p1 }}">lol</div>
    <div x-else>no lol</div>
</x-component>

<x-component name="password_input">
    <x-prop name="name" />
    <x-prop name="id" optional />
    <x-prop name="x-model" optional />
    <x-prop name="placeholder" optional />

    <div class="relative {{ props.classes }}" x-data="{ showPassword: false }">
        <input
            class="text-input w-full"
            id="{{ props.id }}"
            name="{{ props.name }}"
            placeholder="{{ props.placeholder }}"
        />

        <i
            class="bi bi-eye-fill absolute top-2 right-3 cursor-pointer text-xl"
            @click="showPassword = true"
            x-show="!showPassword"
        ></i>
        <i
            class="bi bi-eye-slash-fill absolute top-2 right-3 cursor-pointer text-xl"
            @click="showPassword = false"
            x-show="showPassword"
        ></i>
    </div>
</x-component>

<x-component name="price">
    <p x-if="{{ .IsSome() }}">{{ .Value }}</p>
    <p x-else>---</p>
</x-component>

<x-component name="table-header">
    <x-prop name="classes" optional></x-prop>

    <div
        class="{{ props.classes }} sticky top-0 z-10 flex h-20 h-full w-full items-center justify-center bg-white"
    >
        <x-slot></x-slot>
    </div>
</x-component>

<x-table-header classes="col-span-1"> </x-table-header>

<x-table-header classes="col-span-2">
    <p>Alerta</p>
</x-table-header>

<x-table-header>
    <p>Precio alerta</p>
</x-table-header>

<x-table-header>
    <p>Precio previo</p>
</x-table-header>

<x-table-header>
    <p>Precio mínimo competidor</p>
</x-table-header>

<x-table-header>
    <p>Precio máximo competidor</p>
</x-table-header>

<x-table-header>
    <p>Fecha alerta</p>
</x-table-header>

<x-component name="base">
    <!DOCTYPE html>
    <html lang="en">
        <head>
            <link rel="icon" href="https://cdn-icons-png.flaticon.com/128/1471/1471385.png" />
            <meta charset="UTF-8" />
            <meta
                name="La app de camacu te ayuda a
        trackear mejor el estado de tus productos contra tus competidores.
        Pruébala gratis!"
            />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />

            <link rel="stylesheet" href="/static/css/main.css" defer />

            <title>camacu</title>
            <link rel="preconnect" href="https://fonts.googleapis.com" />
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
            <link
                href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
                rel="stylesheet"
                defer
            />
            <link
                rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
                defer
            />

            <script src="/static/js/main.js" defer></script>
        </head>

        <body class="text-sm text-slate-900" hx-boost="true">
            <script>
                window.onload = () => {
                    // htmx.logAll()
                    htmx.defineExtension("debug", {
                        onEvent: function (name, evt) {
                            console.debug(name, evt);
                        },
                    });
                };
            </script>

            <x-slot></x-slot>

            <script>
                function handleShowAlert($data, evt) {
                    let detail = evt.detail;
                    if (!detail) return;

                    try {
                        $data.text = decodeURIComponent(detail.text.replace(/\+/g, " "));
                    } catch (err) {
                        console.log({ err });
                        $data.text = detail.text;
                    }

                    if (detail.type) {
                        if (detail.type === "success") $data.color = "bg-green-500";
                        else if (detail.type === "info") $data.color = "bg-blue-400";
                        else if (detail.type === "error") $data.color = "bg-red-400";
                    }
                    $data.open = true;

                    if (!detail.timeout) {
                        detail.timeout = 2000;
                    }

                    setTimeout(() => {
                        $data.open = false;
                    }, detail.timeout);
                }
            </script>

            <div
                x-data="{ open: false, text: '', color: 'bg-red-500' }"
                x-on:show-alert.window="(evt) => handleShowAlert($data, evt)"
                x-transition
                x-show="open"
                class="absolute left-0 bottom-6 z-30 w-full"
            >
                <div class="flex w-full justify-center">
                    <div class="relative rounded p-6 pr-16 text-white" x-bind:class="color">
                        <p x-text="text"></p>
                        <div class="absolute top-3 right-4 cursor-pointer" @click="open = false">
                            <i class="bi bi-x-circle text-2xl font-bold text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </body>
    </html>
</x-component>

<x-component name="alerts-page">
	<x-base>
	</x-base>
</x-component>

<div class="paper flex h-full flex-col px-4 py-2">
    <form id="alerts_table_control" class="flex items-center child:mx-2">

        <select name="{{ param("/alerts", "alert_type") }}" class="p-4 outline-none">
            <option value="" selected disabled>Filtrar por alerta</option>
            <x-exp x-for="value, text in allAlerts">
                <option value="{{ value }}">{{ text }}</option>
            </x-exp>
        </select>
    	
        <div class="flex child:mx-1">
            <p>Catálogo:</p>
            <input type="checkbox" name="{{ param("/alerts", "is_catalog") }}" value="true" />
        </div>

        <div class="flex grow justify-end child:mx-2">
            <button
                hx-get="{{ path("/alerts") }}"
                hx-target="body"
                hx-push-url="true"
                class="btn-secondary">
                Deshacer filtros
            </button>
            <button class="btn-primary" type="submit" x-on:click="filtered = true">
                Filtrar
            </button>
        </div>
    </form>
    <div class="h-full overflow-y-auto">
    </div>

</div>

<x-component name="modal">
	<x-prop name="classes"></x-prop>

    <div x-data="{ showModal: false }">
    	<div
        	x-show="showModal"
        	x-transition.opacity
        	x-cloak
        	class="fixed top-0 left-0 z-10 flex h-full w-full items-center justify-center bg-black/70">
        	<div x-on:click.outside="showModal = false">
            	<x-slot name="content" />
        	</div>
    	</div>
    	<div x-on:click="showModal = true">
            <x-slot name="modal-opener" />
    	</div>

    </div>
</x-component>

<x-component name="modal-close">
    <div x-on:click="showModal = false">
		<x-slot />
    </div>
</x-component>

<x-modal classes="the classes">
	<x-slot name="modal_content">
		these are the contents
		<x-modal-close>

		</x-modal-close>
	</x-slot>

	<x-slot name="modal-opener">
		<button>open modal</button>
	</x-slot>
</x-modal>


<x-component name="test">
    <div>
        <p>Hello world</p>
        <p>Hello world</p>
        <p>Hello world</p>
    </div>
</x-component>
